<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    *,
    body{
      height: 100%;
    }
    body{
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      display:flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      background: url(./ä¸‹è¼‰.jfif)no-repeat center/cover; 
    }
  #game{
    border: 1px solid black;
    width: 50vh;
    height: 80vh;
    background: url(./huiseqiangbibeijing-36953336_3.jpg) no-repeat center/cover;
    cursor: url(../cursor_black.png)50 50 ,auto;
  }
  .hole{
    border: 1px solid black;
    width: 10vh;
    height: 16vh;
  }
  .con{
    display: flex;
    flex-direction: column;
    /* flex-wrap: wrap; */
    background: brown;
    width: 50vh;
    height: 5vh;
  }
  .startcon{
    display: flex;
    flex-direction: row;
    /* flex-wrap: wrap; */
    width: 100%;
    height: 50%;
    background: purple;
    position: relative;
  }
  #start{
    width: 20%;
    height: 100%;
  }
  .con1{
    width: 80%;
    height: 100%;
    background: royalblue;
    position: absolute;
    right: 0;
  }

  .col{
    display: flex;
    flex-direction: row;
    /* flex-wrap: wrap; */
    background: cadetblue;
    width: 100%;
    height: 50%;
  } 
  .col >div:nth-child(1){
    text-align: center;
    width: 20%;
  }
  .col >div:nth-child(2){
    width: 40%;
  }
  .col>div:nth-child(3){
    width: 40%;
  }
  .colsp{
    display: flex;
    flex-direction: row;
    background: purple;
  }
  .colsp>div:nth-child(1){
    text-align: center;
    width: 20%;
    background: red;
  }
  .colsp>div{
    width: 80%;
    background: pink;
  }
  .del{
    display: none;
  }
  .green{
    background: url(./green.png)no-repeat center/cover;
    /* Object-fit:contain; */
  }
  .red{
    background: url(./red.png)no-repeat center/cover;
    /* Object-fit:contain; */
  }
  .angery{
    background: url(./angery.png)no-repeat center/cover;
  }
  .wow{
    background: url(./wow.png)no-repeat center/cover;
  }
  .boom{
    background: url(./boom.png)no-repeat center/cover;
  }
</style>
</head>
<body>
  <table id="game">
    <tr>
      <td class="hole" id="hole21"></td>
      <td class="hole" id="hole22"></td>
      <td class="hole" id="hole23"></td>
      <td class="hole" id="hole24"></td>
      <td class="hole" id="hole25"></td>
    </tr>
    <tr>
      <td class="hole" id="hole16"></td>
      <td class="hole" id="hole17"></td>
      <td class="hole" id="hole18"></td>
      <td class="hole" id="hole19"></td>
      <td class="hole" id="hole20"></td>
    </tr>
    <tr>
      <td class="hole" id="hole11"></td>
      <td class="hole" id="hole12"></td>
      <td class="hole" id="hole13"></td>
      <td class="hole" id="hole14"></td>
      <td class="hole" id="hole15"></td>
    </tr>
    <tr>
      <td class="hole" id="hole6"></td>
      <td class="hole" id="hole7"></td>
      <td class="hole" id="hole8"></td>
      <td class="hole" id="hole9"></td>
      <td class="hole" id="hole10"></td>
    </tr>
    <tr>
      <td class="hole" id="hole1"></td>
      <td class="hole" id="hole2"></td>
      <td class="hole" id="hole3"></td>
      <td class="hole" id="hole4"></td>
      <td class="hole" id="hole5"></td>
    </tr>
  </table>
    <div class="con">
      <div class="startcon">
    <input type="button" value="é–‹å§‹éŠæˆ²" id="start">
    <div class="con1">ç›®å‰åˆ†æ•¸:<span id="score">0</span></div>
    </div>
    <div class="col">
      <div>ç‹è€…ğŸ‘‰</div>
      <div>ç©å®¶:<span id="highname">???</span></div>
      <div>æœ€é«˜åˆ†:<span id="highscore"></span></div>
    </div>
    <div id="dd" class="colsp del">
      <div>æ­»äº¡åå–®ğŸ™</div>
      <div>æ­»è€…å§“å:<span id="dead">???</span></div>
    </div>
</div>
<script>
  const holes = document.getElementsByClassName('hole')
      const start =document.getElementById('start')
      const scoreText=document.getElementById('score')
      const highnameText=document.getElementById('highname')
      const highscoreText=document.getElementById('highscore')
      const deadText=document.getElementById('dead')
      const dd=document.getElementById('dd')

      //æœ€é«˜åˆ†
      const high={score:0,name:'???'}
      //ç´€éŒ„é»åˆ°boom
      const bom={score:-999,name:'???'}
      //è¨ˆåˆ†
      let score = 0
      //è¨ˆæ™‚å™¨
      let timer=0

      //è®€å–è³‡æ–™
      const storage = JSON.parse(localStorage.getItem('rabbit'))
      //å¦‚æœæœ‰è³‡æ–™
      if(storage){
        high.name=storage.name
        high.score=storage.score
        //ä¿®æ”¹æœ€é«˜åˆ†ï¼Œé¡¯ç¤ºæ–‡å­—
        highnameText.innerText=high.name
        highscoreText.innerText=high.score
      }

      //è®€å–è³‡æ–™
      const redrabbit = JSON.parse(localStorage.getItem('redrabbit'))
      //å¦‚æœæœ‰è³‡æ–™
      if(redrabbit){
        bom.name=redrabbit.name
        bom.score=redrabbit.score
        //ä¿®æ”¹æœ€é«˜åˆ†ï¼Œé¡¯ç¤ºæ–‡å­—
        highnameText.innerText=high.name
        highscoreText.innerText=high.score
      }

      start.onclick=()=>{
        //åœç”¨é–‹å§‹æŒ‰éˆ•
        start.disabled=true
        //é‡è¨­åˆ†æ•¸
        score=0
        scoreText.innerText=score
        //éš±è—
        dd.classList.add('del')
        //æ¯ç§’è®Šæ›ä¸€æ¬¡
        timer=setInterval(game,500)
        game()
        //åç§’éŠæˆ²çµæŸ
        setTimeout(end,10*1000)
      }
      //æ¯ç§’è®Šæ›é¡è‰²
      const game=()=>{
        for(const hole of holes){
          //ç§»é™¤é¡è‰²
          hole.classList.remove('red')
          hole.classList.remove('green')
          hole.classList.remove('wow')
          hole.classList.remove('angery')
          hole.classList.remove('boom')
        }
        //éš¨æ©ŸæŠ½ä¸‰å€‹è®Šæ›é¡è‰²ï¼Œä¸è€ƒæ…®é‡è¤‡
        for(let i =0;i<2;i++){
          holes[Math.round(Math.random()*(holes.length-1))].classList.add('red')
          holes[Math.round(Math.random()*(holes.length-1))].classList.add('green')
        }
        for(let j=0;j<=0;j++){
          holes[Math.round(Math.random()*(holes.length-1))].classList.add('boom')
        }
      }

      
      //åŠ åˆ†ã€æ¸›åˆ†ã€æ›åœ–
      for(const hole of holes){
        hole.onclick=()=>{
          if(hole.classList.contains('red')){
            hole.classList.replace('red','angery')
            score--
            scoreText.innerText=score
          }else if(hole.classList.contains('green')){
            hole.classList.replace('green','wow')
            score++
            scoreText.innerText=score
          }else if(hole.classList.contains('boom')){
            clearInterval(timer)
            score=-999
            scoreText.innerText=score
            for(const hole of holes){
          hole.classList.remove('red')
          hole.classList.remove('green')
          hole.classList.remove('wow')
          hole.classList.remove('angery')
          hole.classList.remove('boom')
        }
        start.disabled=false
        alert(`åŸºå»‰åˆ—å…‹å·²çˆ†èµ°ï¼Œè«‹ç›¡é€Ÿé€ƒå‘½`)
          }
        }
      }

      //éŠæˆ²åœæ­¢
      const end=()=>{
        //åœæ­¢è®Šæ›é¡è‰²
        clearInterval(timer)
        //é¡è‰²æ¸…æ‰
        for(const hole of holes){
          hole.classList.remove('red')
          hole.classList.remove('green')
          hole.classList.remove('wow')
          hole.classList.remove('angery')
          hole.classList.remove('boom')
        }
        //å•Ÿç”¨é–‹å§‹æŒ‰éˆ•
        start.disabled=false
        //è·³å‡ºè¨Šæ¯
        alert(`éŠæˆ²çµæŸï¼Œä½ å¾—åˆ°${score}åˆ†`)

        if(score>high.score){
        localStorage.setItem('rabbit','è«‹è¼¸å…¥åå­—')
        //è«‹ç©å®¶è¼¸å…¥åå­—
        const input =prompt('æœ€é«˜åˆ†ï¼Œè«‹è¼¸å…¥åå­—')
        //ä¿®æ”¹æœ€é«˜åˆ†è®Šæ•¸è³‡æ–™
        high.score=score
        high.name=input||'???'
        //ä¿®æ”¹æœ€é«˜åˆ†é¡¯ç¤ºæ–‡å­—
        highnameText.innerText=high.name
        highscoreText.innerText=high.score
        //ä¿å­˜
        //localStorage.setItme(è³‡æ–™å,æ–‡å­—)
        //è®Šæ•¸è½‰æ–‡å­—:JSON.stringify(è®Šæ•¸)
        localStorage.setItem('rabbit',JSON.stringify(high))
      }

      if(score==bom.score){
        localStorage.setItem('redrabbit','è«‹è¼¸å…¥åå­—')
        //è«‹ç©å®¶è¼¸å…¥åå­—
        const input =prompt('è«‹è¼¸å…¥æ­»è€…å§“å')
        //ä¿®æ”¹æœ€é«˜åˆ†è®Šæ•¸è³‡æ–™
        dead.name=input||'???'
        //ä¿®æ”¹æœ€é«˜åˆ†é¡¯ç¤ºæ–‡å­—
        deadText.innerText=dead.name
        //ä¿å­˜
        //localStorage.setItme(è³‡æ–™å,æ–‡å­—)
        //è®Šæ•¸è½‰æ–‡å­—:JSON.stringify(è®Šæ•¸)
        localStorage.setItem('redrabbit',JSON.stringify(bom))
        dd.classList.remove('del')
      }
    }


</script>
</body>
</html>